/**
 * @file loading.css
 * @author Laylson Albuquerque
 * @version 1.0
 *
 * @description
 * Folha de estilos para o componente de tela de carregamento (Loading).
 * Cria uma animação de "Pokébola" que cobre a tela inteira, com um spinner central
 * e duas metades (vermelha e branca) que se separam na animação de saída.
 */


/* ==========================================================================
   1. ESTILO DO HOST (O CONTAINER PRINCIPAL)
   ========================================================================== */

/* * :host é o seletor especial do Angular que estiliza o elemento "pai" 
 * do componente (neste caso, <app-loading>).
 */
:host {
  /* Garante que o loading cubra a tela inteira, independentemente da rolagem. */
  position: fixed; 
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh; /* 100% da altura da tela (viewport height). */
  
  /* Um z-index muito alto garante que o loading fique acima de todo o conteúdo. */
  z-index: 9999; 
  
  /* Necessário para que :host possa ter 'position: fixed' e dimensões. */
  display: block; 
  
  /* Previne barras de rolagem estranhas durante a animação. */
  overflow: hidden; 
  
  
  /* Define a animação de desaparecimento (fade-out) para quando a classe .recolhendo for adicionada. */
  transition: opacity 600ms ease-in-out;
  opacity: 1; /* Estado inicial: totalmente visível. */
}


/* ==========================================================================
   2. COMPONENTES DA ANIMAÇÃO (METADES E BOLA)
   ========================================================================== */

/* Estilo compartilhado pelas duas metades da "Pokébola". */
.half-top,
.half-bottom {
  position: absolute; /* Permite o posicionamento exato dentro do :host. */
  left: 0;
  width: 100%;
  height: 50%; /* Cada metade ocupa exatamente 50% da altura da tela. */
  
  /* * Define a animação de "deslizamento" para quando a classe .recolhendo for adicionada.
   * 'transform' é o que será animado, '600ms' é a duração.
   */
  transition: transform 600ms ease-in-out;
}

/* Metade superior (vermelha). */
.half-top {
  top: 0;
  background-color: #ff0000; 
  transform: translateY(0); /* Posição inicial (sem deslocamento). */
}

/* Metade inferior (branca). */
.half-bottom {
  bottom: 0;
  background-color: white; 
  transform: translateY(0); /* Posição inicial (sem deslocamento). */
}

/* O Círculo Central (Spinner). */
.pokeball-center {
  position: absolute; /* Posicionado em relação ao :host. */
  top: 50%;
  left: 50%;
  width: 80px;  /* Tamanho do círculo. */
  height: 80px; /* Tamanho do círculo. */
  background-color: transparent; 
  border-radius: 50%; /* Transforma o quadrado em um círculo perfeito. */
  box-sizing: border-box; /* Garante que a borda não aumente o tamanho total. */
  
  /* O truque para centralizar perfeitamente um elemento de tamanho dinâmico. */
  transform: translate(-50%, -50%); 
  
  /* 1. Borda preta sólida de 8px em toda a volta. */
  border: 8px solid black; 
  
  /* 2. A MUDANÇA: Sobrescreve a cor da borda SUPERIOR para 'transparent'. */
  /* É isso que cria a "falha" no círculo, permitindo o efeito de spinner. */
  border-top-color: transparent; 
  
  /* Aplica a animação 'spin' definida nos @keyframes. */
  animation: spin 1.5s linear infinite;
  
  /* Define as transições para a animação de saída. */
  transition: opacity 300ms ease-out, transform 600ms ease-in-out;
  opacity: 1; /* Estado inicial: visível. */
}

/* * Pseudo-elemento usado para criar o "ponto" preto interno da Pokébola.
 * Ele é "filho" do .pokeball-center e gira junto com ele.
 */
.pokeball-center::before {
  content: ''; /* Necessário para que o pseudo-elemento seja renderizado. */
  position: absolute;
  top: 50%;
  left: 50%;
  width: 30px; 
  height: 30px;
  background-color: black; 
  border-radius: 50%;
  transform: translate(-50%, -50%); /* Centraliza em relação ao .pokeball-center. */
}


/* ==========================================================================
   3. ANIMAÇÃO (KEYFRAMES)
   ========================================================================== */

/* Define a animação 'spin' (giro). */
@keyframes spin {
  /* Estado inicial: sem rotação. */
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  /* Estado final: uma volta completa. */
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}


/* ==========================================================================
   4. ESTADOS DE SAÍDA (ANIMAÇÃO DE RECOLHIMENTO)
   ========================================================================== */

/* * Esta classe '.recolhendo' será adicionada ao :host (o <app-loading>)
 * via JavaScript (ou Angular) para acionar a animação de saída.
 */

/* Faz o componente inteiro (incluindo o fundo) desaparecer suavemente. */
:host.recolhendo {
  opacity: 0;
}

/* Quando .recolhendo está ativo, desliza a metade superior para FORA da tela (para cima). */
:host.recolhendo .half-top {
  transform: translateY(-100%);
}

/* Quando .recolhendo está ativo, desliza a metade inferior para FORA da tela (para baixo). */
:host.recolhendo .half-bottom {
  transform: translateY(100%);
}

/* Também faz o spinner central desaparecer (um pouco mais rápido que o resto). */
:host.recolhendo .pokeball-center {
  opacity: 0;
}